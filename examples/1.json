{
  "apiVersion": "v1",
  "data": {
    "DOMAIN": ".default.svc.cluster.local",
    "ENV": "beta",
    "HTTP_SCHEME": "https",
    "HTTPS_REDIRECT_FROM": "www.app.beta-veriforceone.com",
    "HTTPS_REDIRECT_TO": "app.beta-veriforceone.com",
    "INSTRUCTORPORTAL_WEBAPPS": "server instructorportal-web.beta-compliancepro-cacentral1.private;",
    "LEGACY_WEBAPPS": "server chronos-web.beta-compliancepro-cacentral1.private;",
    "RESOLVER": "kube-dns.kube-system.svc.cluster.local",
    "SERVERNAME": "app.beta-veriforceone.com www.app.beta-veriforceone.com",
    "TRAINING_LEGACY_WEBAPPS": "training-web.beta-compliancepro-cacentral1.private;",
    "TRAINING_SERVER": "beta-training.net"
  },
  "kind": "ConfigMap",
  "metadata": {
    "labels": {
      "app": "aion-nginx"
    },
    "name": "emvqst-env-kf57km4hkd",
    "namespace": "default"
  }
}
{
  "apiVersion": "v1",
  "kind": "Service",
  "metadata": {
    "labels": {
      "app": "aion-nginx"
    },
    "name": "emvqst-aion-nginx",
    "namespace": "default"
  },
  "spec": {
    "ports": [
      {
        "port": 80,
        "protocol": "TCP",
        "targetPort": 80
      }
    ],
    "selector": {
      "app": "aion-nginx"
    },
    "type": "NodePort"
  }
}
{
  "apiVersion": "apps/v1",
  "kind": "Deployment",
  "metadata": {
    "labels": {
      "app": "aion-nginx"
    },
    "name": "emvqst-aion-nginx",
    "namespace": "default"
  },
  "spec": {
    "replicas": 6,
    "selector": {
      "matchLabels": {
        "app": "aion-nginx"
      }
    },
    "template": {
      "metadata": {
        "labels": {
          "app": "aion-nginx"
        }
      },
      "spec": {
        "containers": [
          {
            "envFrom": [
              {
                "configMapRef": {
                  "name": "emvqst-env-kf57km4hkd"
                }
              }
            ],
            "image": "451310829282.dkr.ecr.us-east-1.amazonaws.com/aion/aion-nginx:development",
            "name": "aion-nginx",
            "ports": [
              {
                "containerPort": 80
              }
            ],
            "resources": {
              "limits": {
                "cpu": "250m",
                "memory": "1Gi"
              },
              "requests": {
                "cpu": "100m",
                "memory": "128Mi"
              }
            }
          }
        ]
      }
    }
  }
}
{
  "apiVersion": "networking.k8s.io/v1",
  "kind": "Ingress",
  "metadata": {
    "annotations": {
      "alb.ingress.kubernetes.io/actions.redirect-to-old-domain": "{\"Type\":\"redirect\",\"RedirectConfig\":{\"Host\":\"app.beta-veriforceone.com\",\"Path\":\"/#{path}\",\"Port\":\"443\",\"Protocol\":\"HTTPS\",\"Query\":\"#{query}\",\"StatusCode\":\"HTTP_301\"}}",
      "alb.ingress.kubernetes.io/actions.ssl-redirect": "{\"Type\": \"redirect\", \"RedirectConfig\": { \"Protocol\": \"HTTPS\", \"Port\": \"443\", \"StatusCode\": \"HTTP_301\"}}",
      "alb.ingress.kubernetes.io/certificate-arn": "arn:aws:acm:ca-central-1:597690436128:certificate/dd812e45-ee27-4b7a-aa86-313fe91482cf,arn:aws:acm:ca-central-1:597690436128:certificate/7c68597d-b9a3-428c-9c32-74bd2002f093",
      "alb.ingress.kubernetes.io/healthcheck-path": "/elb-status",
      "alb.ingress.kubernetes.io/inbound-cidrs": "0.0.0.0/0",
      "alb.ingress.kubernetes.io/listen-ports": "[{\"HTTPS\":443}, {\"HTTP\":80}]",
      "alb.ingress.kubernetes.io/scheme": "internet-facing",
      "alb.ingress.kubernetes.io/subnets": "TODO-access_subnet_ids-TODO",
      "alb.ingress.kubernetes.io/target-type": "ip",
      "external-dns.alpha.kubernetes.io/hostname": "app.beta-veriforceone.com",
      "kubernetes.io/ingress.class": "alb"
    },
    "name": "emvqst-aion-nginx",
    "namespace": "default"
  },
  "spec": {
    "rules": [
      {
        "http": {
          "paths": [
            {
              "backend": {
                "service": {
                  "name": "ssl-redirect",
                  "port": {
                    "name": "use-annotation"
                  }
                }
              },
              "path": "/*/api/*",
              "pathType": "ImplementationSpecific"
            }
          ]
        }
      },
      {
        "http": {
          "paths": [
            {
              "backend": {
                "service": {
                  "name": "ssl-redirect",
                  "port": {
                    "name": "use-annotation"
                  }
                }
              },
              "path": "/api/*",
              "pathType": "ImplementationSpecific"
            }
          ]
        }
      },
      {
        "host": "beta.pecdata.net",
        "http": {
          "paths": [
            {
              "backend": {
                "service": {
                  "name": "redirect-to-old-domain",
                  "port": {
                    "name": "use-annotation"
                  }
                }
              },
              "pathType": "ImplementationSpecific"
            }
          ]
        }
      },
      {
        "http": {
          "paths": [
            {
              "backend": {
                "service": {
                  "name": "emvqst-aion-nginx",
                  "port": {
                    "number": 80
                  }
                }
              },
              "path": "/*",
              "pathType": "ImplementationSpecific"
            }
          ]
        }
      }
    ]
  }
}
